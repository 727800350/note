#!/bin/bash
## genearate pdf from tex using xelatex

dir=`pwd`
cd $dir

tex=`ls *.tex`
tex=`echo $tex | awk -F. '{print $1}'`

log="$tex.log"
echo "xelatex $tex 1> ${log} 2>&1 || exit 1"
xelatex $tex 1> ${log} 2>&1 || exit 1

if [ -f *.bib ]
then
	echo "bib file exists"

	echo "bibtex $tex 1> ${log} 2>&1 || exit 1"
	bibtex $tex 1> ${log} 2>&1 || exit 1

	echo "xelatex $tex 1> ${log} 2>&1 || exit 1"
	xelatex $tex 1> ${log} 2>&1 || exit 1

	echo "xelatex $tex 1> ${log} 2>&1 || exit 1"
	xelatex $tex 1> ${log} 2>&1 || exit 1
fi

echo "Generate pdf done"
echo "removing generated intermediate files"
rm *.aux *.bbl *.blg *.out *.log 2>/dev/null
exit 0

