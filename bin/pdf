#!/bin/bash
## genearate pdf from tex using xelatex
set -x

dir=`pwd`
cd $dir

tex=`ls *.tex`
tex=`echo $tex | awk -F. '{print $1}'`

xelatex $tex || exit 1

if [ -f *.bib ]
then
	echo "bib file exists" >&2
	bibtex $tex || exit 1
	xelatex $tex || exit 1
fi

xelatex $tex || exit 1

echo "Generate pdf done" >&2
echo "removing generated intermediate files" >&2
rm -rf *.aux *.bbl *.blg *.out *.log *.toc

exit 0

